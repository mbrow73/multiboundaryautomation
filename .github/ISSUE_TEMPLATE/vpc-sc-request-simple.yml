name: "üîí VPC Service Controls Access Request"
description: "Get help accessing GCP services across VPC SC perimeters"
title: "[VPC SC] "
labels: [vpc-sc-request]

body:
  - type: markdown
    attributes:
      value: |
        ## üÜò Get Access to GCP Services

        **Having trouble accessing a GCP service?** We'll help you fix it.

        Just answer a few questions - we'll figure out the technical details for you.

        ---

  - type: input
    id: reqid
    attributes:
      label: Request ID
      description: Your ticket number (e.g., from ServiceNow, Jira)
      placeholder: "REQ1234567 or TICKET-456"
    validations:
      required: true

  - type: textarea
    id: error_message
    attributes:
      label: "üìã Error Message (if you have one)"
      description: |
        **Paste the error you're seeing** (if applicable)
        This helps us understand exactly what's being blocked.
      placeholder: |
        Example:
        Request is prohibited by organization's policy. vpcServiceControlsUniqueIdentifier: ABC123...

        OR

        Access denied. Service 'storage.googleapis.com' is not accessible from this perimeter.
    validations:
      required: false

  - type: textarea
    id: what_trying_to_do
    attributes:
      label: "üéØ What are you trying to do?"
      description: Describe in plain English what you're trying to accomplish
      placeholder: |
        Examples:
        - "I'm trying to read data from a BigQuery dataset in project prod-analytics from my Cloud Run service in project dev-app"
        - "My Cloud Function needs to write to a Storage bucket in a different project"
        - "I need to access Pub/Sub topics from an external service"
    validations:
      required: true

  - type: input
    id: source_description
    attributes:
      label: "üì§ WHERE is the request coming from?"
      description: The service/resource that's trying to access something
      placeholder: "Cloud Run service in project my-app-dev OR External IP 203.0.113.50"
    validations:
      required: true

  - type: input
    id: source_project
    attributes:
      label: Source Project Number (if known)
      description: The numeric project ID (not the name)
      placeholder: "1234567890"
    validations:
      required: false

  - type: input
    id: source_identity
    attributes:
      label: Service Account or Identity
      description: The service account making the request
      placeholder: "my-service@my-project.iam.gserviceaccount.com"
    validations:
      required: true

  - type: input
    id: dest_description
    attributes:
      label: "üì• WHAT are you trying to access?"
      description: The service/resource you're trying to reach
      placeholder: |
        BigQuery dataset in project prod-analytics
        or
        Storage bucket gs://my-bucket
    validations:
      required: true

  - type: input
    id: dest_project
    attributes:
      label: Destination Project Number (if known)
      description: The numeric project ID where the resource lives
      placeholder: "9876543210"
    validations:
      required: false

  - type: dropdown
    id: service
    attributes:
      label: "üîß Which GCP Service?"
      description: What service are you trying to use?
      options:
        - BigQuery (bigquery.googleapis.com)
        - Cloud Storage (storage.googleapis.com)
        - Pub/Sub (pubsub.googleapis.com)
        - Cloud Run (run.googleapis.com)
        - Artifact Registry (artifactregistry.googleapis.com)
        - Compute Engine (compute.googleapis.com)
        - Cloud Logging (logging.googleapis.com)
        - IAM (iam.googleapis.com)
        - Container Registry (containerregistry.googleapis.com)
        - Other (specify in justification)
    validations:
      required: true

  - type: dropdown
    id: access_type
    attributes:
      label: "üîì What kind of access?"
      description: What operations do you need to perform?
      options:
        - Read Only (list, get, read data)
        - Write Only (create, update, delete)
        - Read and Write (full access)
        - Specific operations (describe in justification)
    validations:
      required: true

  - type: input
    id: external_ip
    attributes:
      label: "üåê External IP Address (if applicable)"
      description: If accessing from outside GCP, what's the source IP?
      placeholder: "203.0.113.50 or 203.0.113.0/24"
    validations:
      required: false

  - type: textarea
    id: justification
    attributes:
      label: "üíº Business Justification"
      description: Why do you need this access? What's the business use case?
      placeholder: |
        Example:
        Our ETL pipeline in dev-app needs to read customer data from the prod-analytics BigQuery dataset
        to generate daily reports. This is part of the Q1 Analytics initiative (approved by VP Engineering).
    validations:
      required: true

  - type: dropdown
    id: urgency
    attributes:
      label: "‚è∞ How urgent is this?"
      options:
        - Normal (24-48 hours is fine)
        - Urgent (production issue, need within 4 hours)
        - Critical (production down, need ASAP)
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ---

        ## ‚ú® What Happens Next?

        1. ü§ñ **Automatic Translation** - We'll convert your description into the right VPC SC rules
        2. ‚úÖ **Validation** - Check that everything is correct
        3. üìã **PR Creation** - Create pull requests to the right perimeter repositories
        4. üëÄ **NetSec Review** - Security team reviews (usually < 24 hours)
        5. üöÄ **Deployment** - Rules deployed automatically on approval
        6. üí¨ **Notification** - You'll get a comment when it's done!

        **Questions?** Comment on this issue after submission.

        ---
