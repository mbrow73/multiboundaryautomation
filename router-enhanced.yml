# Enhanced Router Configuration for VPC SC Automation
# This config enables intelligent perimeter detection based on project numbers

perimeters:
  test-perim-a:
    repo: mbrow73/test-perim-a-config
    tfvars_file: terraform.auto.tfvars
    accesslevel_file: accesslevel.tf
    policy_id: 123456789

    # Project-to-Perimeter Mapping
    # Add project numbers (NOT project IDs) that belong to this perimeter
    projects:
      - "1234567890"      # prod-app
      - "2345678901"      # prod-data
      - "3456789012"      # prod-ml

  test-perim-b:
    repo: mbrow73/test-perim-b-config
    tfvars_file: terraform.auto.tfvars
    accesslevel_file: accesslevel.tf
    policy_id: 987654321

    projects:
      - "9876543210"      # dev-app
      - "8765432109"      # dev-data
      - "7654321098"      # staging-app

# Optional: Default perimeter for projects not explicitly mapped
# If a project isn't found in any perimeter's project list, use this
default_perimeter: test-perim-a

# External IP ranges that require TLM IDs
external_ip_ranges_requiring_tlm:
  - "0.0.0.0/0"          # All external IPs

# Service-specific defaults
service_defaults:
  # Some services commonly need both INGRESS and EGRESS
  cross_perimeter_services:
    - bigquery.googleapis.com
    - storage.googleapis.com
    - pubsub.googleapis.com

  # Services that usually only need EGRESS
  egress_only_services:
    - logging.googleapis.com
    - containerregistry.googleapis.com
